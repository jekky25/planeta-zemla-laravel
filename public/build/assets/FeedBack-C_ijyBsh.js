import{M as C}from"./MainLayout-DjohslSZ.js";import{f as r,o as i,r as b,j,i as x,k as L,h as S,v as M,l as p,b as a,a as o,P as N,w as f,e as h,g as $,p as I,d as w,F as B}from"./app-CXY6ZZGz.js";import{G as E}from"./GoogleCaptcha-kB3qBKeg.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={},F={class:"button validate bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"submit"};function z(s,e){return i(),r("button",F,[b(s.$slots,"default")])}const P=g(U,[["render",z]]),G=["value"],v={__name:"TextInput",props:{modelValue:{type:String}},emits:["update:modelValue"],setup(s){return(e,u)=>(i(),r("input",{size:"30",class:"shadow appearance-none border inputbox rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:s.modelValue,onInput:u[0]||(u[0]=l=>e.$emit("update:modelValue",l.target.value))},null,40,G))}},y={__name:"Textarea",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(s){const e=j(s,"modelValue");return(u,l)=>x((i(),r("textarea",{class:"inputbox required rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-transparent focus:border-transparent","onUpdate:modelValue":l[0]||(l[0]=t=>e.value=t)},null,512)),[[L,e.value]])}},H=["value"],q={__name:"Checkbox",props:{checked:{type:[Array,Boolean],required:!0},value:{default:null}},emits:["update:checked"],setup(s,{emit:e}){const u=e,l=s,t=S({get(){return l.checked},set(c){u("update:checked",c)}});return(c,d)=>x((i(),r("input",{type:"checkbox",value:s.value,"onUpdate:modelValue":d[0]||(d[0]=m=>t.value=m),class:"mr-2 border inputbox rounded focus:text-blue-600 ring-offset-0"},null,8,H)),[[M,t.value]])}},D={name:"LabelInput",components:{TextInput:v},data(){return{inputName:"",data:Object}},props:{id:{type:String,default:null},type:{type:String,default:null},name:{type:String,default:null},model:{type:String,default:null}},methods:{get(){return this.inputName}}},O={class:"mb-4"},R=["for"];function A(s,e,u,l,t,c){const d=p("TextInput");return i(),r("div",O,[a("label",{for:this.id},[b(s.$slots,"default")],8,R),e[1]||(e[1]=a("br",null,null,-1)),o(d,{modelValue:t.inputName,"onUpdate:modelValue":e[0]||(e[0]=m=>t.inputName=m),type:this.type,name:this.name,id:this.id,ref:"InputField"},null,8,["modelValue","type","name","id"])])}const J=g(D,[["render",A]]),K={name:"LabelTextarea",components:{Textarea:y},data(){return{inputName:"",data:Object}},props:{id:{type:String,default:null},name:{type:String,default:null},model:{type:String,default:null}},methods:{get(){return this.inputName}}},Q={class:"mb-4"},W=["for"];function X(s,e,u,l,t,c){const d=p("Textarea");return i(),r("div",Q,[a("label",{for:this.id},[b(s.$slots,"default")],8,W),e[1]||(e[1]=a("br",null,null,-1)),o(d,{modelValue:t.inputName,"onUpdate:modelValue":e[0]||(e[0]=m=>t.inputName=m),name:this.name,id:this.id,ref:"InputField"},null,8,["modelValue","name","id"])])}const Y=g(K,[["render",X]]),Z={name:"Page",components:{Link:N,GoogleCaptcha:E,SubmitButton:P,TextInput:v,Textarea:y,Checkbox:q,LabelInput:J,LabelTextarea:Y},layout:C,props:[],data(){return{errors:"",success:"",regexpEmail:/^(?:[a-z0-9._]+(?:[-_.]?[a-z0-9._]+)?@[a-z0-9_.-]+(?:\.?[a-z0-9]+)?\.[a-z]{2,5})$/i,name:"",subject:"",email:"",message:"",proba:"",recaptcha_response:"",visible:!0,data:Object}},methods:{clearParams(){this.$data.errors="",this.$data.success=""},reloadCaptcha(){this.$refs.googleCaptcha.initReCaptcha()},checkName(){this.$refs.name.get().length<2&&(this.$data.errors+="<p>Имя не введено</p>")},checkEMail(){this.$refs.email.get().match(this.$data.regexpEmail)||(this.$data.errors+="<p>Некорректно введен е-майл</p>")},checkSubject(){this.$refs.subject.get().length<2&&(this.$data.errors+="<p>Тема не введена</p>")},checkMessage(){this.$refs.message.get().length<2&&(this.$data.errors+="<p>Не введено сообщение</p>")},isError(){return this.$data.errors!=""},getData(){this.$data.name=this.$refs.name.get(),this.$data.email=this.$refs.email.get(),this.$data.subject=this.$refs.subject.get(),this.$data.message=this.$refs.message.get(),this.$data._token=this.csrf_field,this.recaptcha_response=document.getElementById("recaptchaResponse").value},send(){return this.clearParams(),this.checkName(),this.checkSubject(),this.checkEMail(),this.checkMessage(),this.isError()||(this.getData(),this.ajax()),!1},ajax(){return axios.post(route("feedback",this.$data)).then(s=>{s.data.success==1&&(this.success="<p>Ваше сообщение было успешно отправлено!</p>",this.reloadCaptcha(),this.$data.visible=!1)}).catch(s=>{this.$data.errors+="<p>"+s.response.data.message+"</p>",this.reloadCaptcha()}),!1}}},ee={id:"component-contact"},te={class:"contentheading"},se={width:"100%",cellpadding:"0",cellspacing:"0",border:"0",class:"contentpaneopen"},ae={colspan:"2"},ne={action:"javascript:void(null);",method:"post",name:"emailForm",id:"emailForm",class:"form-validate"},oe=["value"],le=["innerHTML"],re=["innerHTML"],ie={class:"contact_email"},ue={class:"mb-4"};function de(s,e,u,l,t,c){const d=p("Link"),m=p("GoogleCaptcha"),_=p("LabelInput"),V=p("LabelTextarea"),k=p("Checkbox"),T=p("SubmitButton");return i(),r(B,null,[e[14]||(e[14]=a("div",{class:"componentheading"},null,-1)),a("div",ee,[e[13]||(e[13]=a("div",{class:"componentheading"},null,-1)),a("h2",te,[o(d,{href:s.route("feedback"),class:"contentpagetitle"},{default:f(()=>e[6]||(e[6]=[h("Обратная связь")])),_:1},8,["href"])]),a("table",se,[a("tr",null,[a("td",ae,[a("form",ne,[a("input",{type:"hidden",name:"_token",autocomplete:"off",value:s.$attrs.csrf_field},null,8,oe),t.success?(i(),r("div",{key:0,class:"success-text",innerHTML:t.success},null,8,le)):$("",!0),t.errors?(i(),r("div",{key:1,class:"error-text",innerHTML:t.errors},null,8,re)):$("",!0),o(m,{ref:"googleCaptcha"},null,512),x(a("div",ie,[o(_,{ref:"name",modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.name=n),type:"text",name:"name",id:"contact_name"},{default:f(()=>e[7]||(e[7]=[h(" Введите ваше имя:")])),_:1},8,["modelValue"]),o(_,{ref:"email",modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=n=>t.email=n),type:"text",name:"name",id:"contact_email"},{default:f(()=>e[8]||(e[8]=[h(" E-mail адрес:")])),_:1},8,["modelValue"]),o(_,{ref:"subject",modelValue:t.subject,"onUpdate:modelValue":e[2]||(e[2]=n=>t.subject=n),type:"text",name:"subject",id:"contact_subject"},{default:f(()=>e[9]||(e[9]=[h(" Тема сообщения:")])),_:1},8,["modelValue"]),o(V,{ref:"message",modelValue:t.message,"onUpdate:modelValue":e[3]||(e[3]=n=>t.message=n),name:"message",id:"contact_message"},{default:f(()=>e[10]||(e[10]=[h(" Введите текст вашего сообщения:")])),_:1},8,["modelValue"]),a("div",ue,[o(k,{name:"copy",modelValue:s.copy,"onUpdate:modelValue":e[4]||(e[4]=n=>s.copy=n),id:"contact_email_copy",value:"1"},null,8,["modelValue"]),e[11]||(e[11]=a("label",{for:"contact_email_copy"},"Отправить копию этого сообщения на ваш адрес",-1))]),a("div",null,[o(T,{onClick:e[5]||(e[5]=w(n=>{c.send()},["prevent"]))},{default:f(()=>e[12]||(e[12]=[h("Отправить")])),_:1})])],512),[[I,t.visible]])])])])])])],64)}const he=g(Z,[["render",de]]);export{he as default};
